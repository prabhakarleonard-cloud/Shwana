<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dragon World</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      height:100vh;
      overflow:hidden;
      background:#000;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: rgba(255,255,255,0.92);
    }

    .scene{
      position:fixed;
      inset:0;
      background:#000;
    }

    /* ===== World ===== */
    .world{
      position:absolute;
      inset:0;
      opacity:0;
      transform: scale(1.08);
      transition: opacity 1.3s ease, transform 2.8s ease;
    }

    .opening .world{
      opacity:1;
    }
    .push .world{
      transform: scale(1.18);
    }

    /* Sky */
    .sky{
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 70% 16%, rgba(255,255,255,0.22), transparent 40%),
        radial-gradient(circle at 30% 25%, rgba(120,200,255,0.16), transparent 52%),
        linear-gradient(180deg, #02030a 0%, #071a2d 55%, #02030a 100%);
    }

    .moon{
      position:absolute;
      top: 9%;
      right: 14%;
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.25), rgba(255,255,255,0.02));
      box-shadow:
        0 0 40px rgba(255,255,255,0.18),
        0 0 140px rgba(120,220,255,0.10);
      opacity:0.9;
      z-index:2;
    }

    .stars{
      position:absolute;
      inset:0;
      opacity:0.7;
      background-image:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.55), transparent 60%),
        radial-gradient(1px 1px at 70% 20%, rgba(255,255,255,0.35), transparent 60%),
        radial-gradient(1px 1px at 55% 40%, rgba(255,255,255,0.4), transparent 60%),
        radial-gradient(2px 2px at 85% 35%, rgba(255,255,255,0.25), transparent 60%),
        radial-gradient(1px 1px at 30% 15%, rgba(255,255,255,0.3), transparent 60%),
        radial-gradient(1px 1px at 40% 28%, rgba(255,255,255,0.25), transparent 60%),
        radial-gradient(1px 1px at 10% 22%, rgba(255,255,255,0.25), transparent 60%);
      animation: twinkle 6s ease-in-out infinite;
      z-index:1;
    }

    @keyframes twinkle{
      0%,100%{ opacity:0.55; }
      50%{ opacity:0.95; }
    }

    /* Fog */
    .fog{
      position:absolute;
      inset:-25%;
      background:
        radial-gradient(circle at 30% 40%, rgba(255,255,255,0.06), transparent 60%),
        radial-gradient(circle at 70% 30%, rgba(255,255,255,0.05), transparent 65%),
        radial-gradient(circle at 45% 70%, rgba(255,255,255,0.05), transparent 60%);
      filter: blur(40px);
      opacity:0.65;
      animation: fog 14s ease-in-out infinite;
      z-index:3;
    }
    .fog.two{
      opacity:0.32;
      filter: blur(52px);
      animation-duration: 19s;
      transform: scale(1.08);
    }
    @keyframes fog{
      0%{ transform: translate3d(-2%, -2%, 0) scale(1.05); }
      50%{ transform: translate3d(2%, 1%, 0) scale(1.14); }
      100%{ transform: translate3d(-2%, -2%, 0) scale(1.05); }
    }

    /* Mountains */
    .mountains{
      position:absolute;
      left:0;
      right:0;
      bottom:-1px;
      height: 52vh;
      background:
        linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.82)),
        linear-gradient(180deg, #0a0f1c 0%, #02030a 100%);
      clip-path: polygon(
        0% 100%,
        0% 58%,
        8% 64%,
        18% 54%,
        30% 66%,
        42% 46%,
        54% 64%,
        66% 42%,
        78% 66%,
        88% 52%,
        96% 66%,
        100% 60%,
        100% 100%
      );
      opacity:0.98;
      z-index:4;
    }

    /* ===== Background flying dragons ===== */
    .bgDragons{
      position:absolute;
      inset:0;
      z-index:5;
      pointer-events:none;
    }

    .bgDragon{
      position:absolute;
      width: 140px;
      height: 80px;
      opacity:0.6;
      filter:
        blur(0.3px)
        drop-shadow(0 14px 30px rgba(0,0,0,0.55));
      animation: fly linear infinite;
    }

    /* depth */
    .bg1{ top:18%; left:-25%; width: 170px; animation-duration: 15s; opacity:0.55; }
    .bg2{ top:28%; left:-30%; width: 110px; animation-duration: 12s; opacity:0.35; filter: blur(1px); }
    .bg3{ top:40%; left:-35%; width: 150px; animation-duration: 18s; opacity:0.3; filter: blur(1.4px); }
    .bg4{ top:22%; left:-40%; width: 90px;  animation-duration: 10s; opacity:0.22; filter: blur(1.8px); }
    .bg5{ top:34%; left:-38%; width: 120px; animation-duration: 14s; opacity:0.28; filter: blur(1.2px); }

    @keyframes fly{
      0%{ transform: translateX(0) translateY(0); }
      20%{ transform: translateX(28vw) translateY(-1vh); }
      50%{ transform: translateX(70vw) translateY(1.4vh); }
      100%{ transform: translateX(150vw) translateY(-0.6vh); }
    }

    /* Wings flap */
    .wing{
      transform-origin: 58% 55%;
      animation: flap 0.7s ease-in-out infinite;
    }
    .fast{ animation-duration: 0.55s; }
    .slow{ animation-duration: 0.9s; }

    @keyframes flap{
      0%,100%{ transform: rotate(0deg) scaleY(1); }
      50%{ transform: rotate(-12deg) scaleY(0.94); }
    }

    /* ===== Main dragon (comes to camera) ===== */
    .mainWrap{
      position:absolute;
      left:50%;
      top:55%;
      transform: translate(-50%, -50%) scale(0.15);
      opacity:0;
      z-index:20;
      pointer-events:none;
      transition: transform 2.6s ease, opacity 1.2s ease;
    }

    .mainWrap.arrive{
      opacity:1;
      transform: translate(-50%, -50%) scale(1);
      pointer-events:auto;
    }

    .mainDragon{
      width:min(520px, 92vw);
      height:auto;
      cursor:pointer;
      filter: drop-shadow(0 30px 70px rgba(0,0,0,0.55));
      user-select:none;
    }

    .mainDragon:active{
      transform: scale(0.99);
    }

    /* ===== Text overlays ===== */
    .textBox{
      position:absolute;
      left:50%;
      top:78%;
      transform: translateX(-50%);
      width:min(900px, 92vw);
      text-align:center;
      opacity:0;
      transition: opacity 0.8s ease, transform 0.8s ease;
      z-index:30;
      pointer-events:none;
    }

    .textBox.show{
      opacity:1;
      transform: translateX(-50%) translateY(-10px);
      pointer-events:auto;
    }

    .line1{
      font-family: "Baloo 2", cursive;
      font-weight:800;
      font-size: clamp(1.7rem, 4.4vw, 2.6rem);
      line-height:1.08;
      letter-spacing:-0.02em;
      text-shadow: 0 16px 60px rgba(0,0,0,0.65);
    }

    .line2{
      margin-top: 10px;
      font-size: 1.08rem;
      opacity:0.78;
    }

    .clickHint{
      margin-top: 10px;
      font-size: 1rem;
      opacity:0.62;
    }

    /* ===== Smile state ===== */
    .tongue{
      opacity:0;
      transform: translateY(-4px) scale(0.9);
      transform-origin: center;
      transition: opacity 0.25s ease, transform 0.25s ease;
    }
    .smile .tongue{
      opacity:1;
      transform: translateY(0px) scale(1);
    }

    .eyeGlow{
      opacity:0.65;
      transition: opacity 0.25s ease;
    }
    .smile .eyeGlow{
      opacity:1;
    }

    /* subtle bounce on click */
    .bounce{
      animation: bounce 0.45s ease;
    }
    @keyframes bounce{
      0%{ transform: translate(-50%, -50%) scale(1); }
      45%{ transform: translate(-50%, -50%) scale(1.04); }
      100%{ transform: translate(-50%, -50%) scale(1); }
    }

    /* mobile */
    @media (max-width: 520px){
      .moon{ width: 105px; height: 105px; right: 10%; }
      .textBox{ top: 80%; }
    }
  </style>
</head>

<body>
  <div class="scene opening push" id="scene">

    <div class="world" id="world">
      <div class="sky"></div>
      <div class="stars"></div>
      <div class="moon"></div>

      <div class="fog"></div>
      <div class="fog two"></div>

      <!-- background dragons -->
      <div class="bgDragons" id="bgDragons"></div>

      <div class="mountains"></div>
    </div>

    <!-- main dragon -->
    <div class="mainWrap" id="mainWrap">
      <svg class="mainDragon" id="mainDragon" viewBox="0 0 520 320" xmlns="http://www.w3.org/2000/svg">
        <!-- body shadow -->
        <defs>
          <radialGradient id="faceShade" cx="35%" cy="35%" r="75%">
            <stop offset="0%" stop-color="rgba(40,40,46,0.95)"/>
            <stop offset="55%" stop-color="rgba(10,10,12,0.98)"/>
            <stop offset="100%" stop-color="rgba(0,0,0,1)"/>
          </radialGradient>

          <radialGradient id="eyeLight" cx="40%" cy="35%" r="70%">
            <stop offset="0%" stop-color="rgba(170,255,220,1)"/>
            <stop offset="100%" stop-color="rgba(40,200,140,0.65)"/>
          </radialGradient>
        </defs>

        <!-- head -->
        <path d="M92 180
                 C120 110, 200 70, 280 84
                 C360 98, 422 150, 438 210
                 C456 276, 400 310, 310 300
                 C220 290, 150 260, 112 228
                 C88 206, 82 194, 92 180Z"
              fill="url(#faceShade)"/>

        <!-- ears/horns (original shape) -->
        <path d="M150 120 C135 86, 120 72, 112 78 C116 98, 126 122, 150 142Z"
              fill="rgba(0,0,0,0.96)"/>
        <path d="M206 98 C198 62, 178 46, 170 54 C176 78, 188 106, 206 122Z"
              fill="rgba(0,0,0,0.95)"/>

        <path d="M340 102 C346 62, 366 46, 374 54 C368 78, 356 106, 340 122Z"
              fill="rgba(0,0,0,0.95)"/>
        <path d="M392 126 C410 92, 430 76, 440 84 C434 104, 420 126, 392 146Z"
              fill="rgba(0,0,0,0.96)"/>

        <!-- cheeks -->
        <path d="M150 212 C180 240, 230 258, 280 260 C330 262, 372 246, 404 218"
              fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="8" stroke-linecap="round"/>

        <!-- eyes -->
        <ellipse cx="220" cy="180" rx="44" ry="40" fill="rgba(10,10,10,0.95)"/>
        <ellipse cx="340" cy="180" rx="44" ry="40" fill="rgba(10,10,10,0.95)"/>

        <!-- eye glow -->
        <circle class="eyeGlow" cx="232" cy="190" r="12" fill="url(#eyeLight)"/>
        <circle class="eyeGlow" cx="352" cy="190" r="12" fill="url(#eyeLight)"/>

        <!-- pupils -->
        <circle cx="232" cy="190" r="7" fill="rgba(0,0,0,0.9)"/>
        <circle cx="352" cy="190" r="7" fill="rgba(0,0,0,0.9)"/>

        <!-- eye shine -->
        <circle cx="218" cy="170" r="8" fill="rgba(255,255,255,0.75)"/>
        <circle cx="338" cy="170" r="8" fill="rgba(255,255,255,0.75)"/>

        <!-- nostrils -->
        <ellipse cx="272" cy="220" rx="10" ry="7" fill="rgba(255,255,255,0.06)"/>
        <ellipse cx="308" cy="220" rx="10" ry="7" fill="rgba(255,255,255,0.06)"/>

        <!-- smile line -->
        <path d="M210 240
                 C250 270, 310 270, 350 240"
              fill="none" stroke="rgba(255,255,255,0.10)" stroke-width="8" stroke-linecap="round"/>

        <!-- tongue (hidden until click) -->
        <path class="tongue" d="M260 248
                 C272 270, 300 270, 314 250
                 C302 286, 270 292, 260 248Z"
              fill="rgba(255,120,160,0.85)"/>
      </svg>
    </div>

    <!-- text -->
    <div class="textBox" id="textBox">
      <div class="line1" id="line1">
        The night you made me watch How To Train Your Dragonâ€¦
        <br/>
        is a core memory of us.
      </div>
      <div class="line2" id="line2">Click him.</div>
      <div class="clickHint" id="hint">ðŸ’« (Heâ€™s judging you a little)</div>
    </div>

  </div>

  <script>
    const bgDragons = document.getElementById("bgDragons");
    const mainWrap = document.getElementById("mainWrap");
    const mainDragon = document.getElementById("mainDragon");
    const textBox = document.getElementById("textBox");
    const line1 = document.getElementById("line1");
    const line2 = document.getElementById("line2");
    const hint = document.getElementById("hint");

    let clicked = false;

    // Create background dragons (shadow style)
    function bgDragonSVG(speedClass){
      return `
        <svg viewBox="0 0 220 120" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
          <path d="M38 66
                   C58 44, 92 36, 118 46
                   C138 54, 150 56, 168 48
                   C160 64, 146 76, 124 80
                   C92 86, 62 82, 38 66Z"
                fill="rgba(0,0,0,0.9)"/>
          <path d="M168 48
                   C184 38, 200 40, 206 52
                   C198 60, 188 64, 176 60
                   C172 56, 170 52, 168 48Z"
                fill="rgba(0,0,0,0.9)"/>
          <path d="M38 66
                   C22 74, 16 84, 18 92
                   C30 88, 44 82, 52 74Z"
                fill="rgba(0,0,0,0.85)"/>

          <g class="wing ${speedClass}">
            <path d="M88 52
                     C64 22, 38 20, 24 36
                     C38 40, 52 52, 60 66
                     C70 60, 80 56, 88 52Z"
                  fill="rgba(0,0,0,0.88)"/>
            <path d="M104 56
                     C88 22, 68 10, 52 18
                     C68 28, 78 44, 84 64
                     C92 60, 98 58, 104 56Z"
                  fill="rgba(0,0,0,0.62)"/>
          </g>
        </svg>
      `;
    }

    function spawnBG(){
      const classes = ["bg1","bg2","bg3","bg4","bg5"];
      classes.forEach((c, i) => {
        const el = document.createElement("div");
        el.className = `bgDragon ${c}`;
        const speed = (i % 2 === 0) ? "slow" : "fast";
        el.innerHTML = bgDragonSVG(speed);
        bgDragons.appendChild(el);
      });
    }

    spawnBG();

    // Timeline:
    // Let bg dragons fly for a few seconds
    setTimeout(() => {
      mainWrap.classList.add("arrive");
    }, 3800);

    setTimeout(() => {
      textBox.classList.add("show");
    }, 5200);

    // Click dragon
    mainDragon.addEventListener("click", () => {
      mainWrap.classList.remove("bounce");
      void mainWrap.offsetWidth;
      mainWrap.classList.add("bounce");

      if(!clicked){
        clicked = true;
        mainDragon.classList.add("smile");
        line1.innerHTML = "Looking forward to watching more movies with you ðŸ–¤";
        line2.innerHTML = "Okayâ€¦ now you can continue.";
        hint.innerHTML = "Click him again â†’";

      } else {
        window.location.href = "sudoku.html";
      }
    });
  </script>
</body>
</html>
